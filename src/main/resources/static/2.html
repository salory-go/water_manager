<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æµ‹ç«™ç®¡ç†</title>
  <link rel="stylesheet" href="./css/title.css">
  <link rel="stylesheet" href="./layui-v2.9.3/layui/css/layui.css">
  <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
    }
  </style>
</head>
<body>
<div id="app">
  <el-menu class="el-menu-demo" mode="horizontal" class="flex">
    <el-menu-item index="1"><a href="1.html">æµ‹ç«™åŸºæœ¬ä¿¡æ¯è¡¨</a></el-menu-item>
    <el-menu-item index="2"><a href="2.html">æ²³æµåŸºæœ¬ä¿¡æ¯è¡¨</a></el-menu-item>
    <el-menu-item index="3"><a href="3.html">æµ‹ç«™è¯¦ç»†ä¿¡æ¯è¡¨</a></el-menu-item>
  </el-menu>
  <div id="clipped-title1">
      <h1>æµ‹ç«™ç®¡ç†</h1>
  </div>
  <div id="clipped-title3">
      <h1>æ²³æµåŸºæœ¬ä¿¡æ¯</h1>
  </div>

  <div style="text-align: right; margin-bottom: 10px;margin-right: 10px">
    <el-button type="primary" icon="el-icon-plus" circle @click="addRow"></el-button>
  </div>

  <el-table :data="tableData" style="width: 100%" stripe border>
    <el-table-column prop="hname" label="æ²³æµåç§°" fixed></el-table-column>
    <el-table-column prop="code" label="æ²³æµç¼–ç "></el-table-column>
    <el-table-column prop="lname" label="æµåŸŸåç§°"></el-table-column>
    <el-table-column prop="czname" label="æµ‹ç«™åç§°"></el-table-column>
    <el-table-column prop="name" label="æ°´ç³»åç§°"></el-table-column>
    <el-table-column label="æ“ä½œ">
      <template slot-scope="scope" width="120">
        <el-button size="mini" type="danger" icon="el-icon-delete" circle
                   @click="deleteRow(scope.row)"></el-button>
        <el-button size="mini" type="primary" icon="el-icon-edit" circle
                   @click="updateRow(scope.row)"></el-button>
      </template>
    </el-table-column>
  </el-table>
</div>

<script src="js/vue.js"></script>
<script src="./js/element.js"></script>
<script>
  new Vue({
    el: "#app",
    data() {
      return {
        currentTime: '',
        tableData: [],
        activeIndex: 1
      };
    },
    methods: {
      addRow() {
        window.location.href = 'add.html';
      },
      deleteRow(row) {
        fetch(`http://localhost:8080/HL/${row.code}`, {
          method: 'DELETE'
        }).then(() => {
          this.fetchData();
        });
      },
      updateRow(row) {
        const params = new URLSearchParams(row).toString();
        console.log(params);
        this.$message.error('æ²¡å†™æğŸ¤¯');
        // window.location.href = `update_1.html?${params}`;
      },
      fetchData() {
        fetch('http://localhost:8080/HL')
                .then(response => response.json())
                .then(data => {
                  this.tableData = data;
                  console.log(data);
                })
                .catch(error => console.error('Error fetching data:', error));
      },
      getCurrentTime() {
        const now = new Date();
        const hours = now.getHours().toString().padStart(2, '0');
        const minutes = now.getMinutes().toString().padStart(2, '0');
        const seconds = now.getSeconds().toString().padStart(2, '0');
        return `${hours}:${minutes}:${seconds}`;
      },
      updateCurrentTime() {
        this.currentTime = this.getCurrentTime();
      }
    },
    mounted() {
      this.fetchData();
      this.updateCurrentTime();
      this.activeIndex = 1;
    }
  });
  // è·å–å½“å‰æ—¶é—´
  // function getCurrentTime() {
  //   const now = new Date();
  //   const hours = now.getHours();
  //   const minutes = now.getMinutes();
  //   const seconds = now.getSeconds();
  //   return `${hours}:${minutes}:${seconds}`;
  // }

  // æ›´æ–°æ—¶é—´æ˜¾ç¤º
  // function updateCurrentTime() {
  //   const currentTimeElement = document.getElementById('current-time');
  //   if (currentTimeElement) {
  //     currentTimeElement.textContent = getCurrentTime();
  //   }
  // }

  // æ›´æ–°æ—¶é—´æ¯ç§’é’Ÿ
  // setInterval(updateCurrentTime, 1000);

  // å¼‚æ­¥è¯·æ±‚æ•°æ®å¹¶æ¸²æŸ“è¡¨æ ¼
  // function fetchDataAndRenderTable() {
  //   fetch('http://localhost:8080/HL') // æ›¿æ¢ä¸ºå®é™…çš„æ•°æ®æ¥å£åœ°å€
  //           .then(response => response.json())
  //           .then(data => renderTable(data))
  //           .catch(error => console.error('Error fetching data:', error));
  // }

  // æ¸²æŸ“è¡¨æ ¼
  // function renderTable(data) {
  //   const tbody = document.querySelector('tbody');
  //
  //   // æ¸…ç©ºåŸæœ‰æ•°æ®
  //   tbody.innerHTML = '';
  //
  //   // éå†æ•°æ®å¹¶æ’å…¥æ–°çš„è¡Œ
  //   data.forEach(rowData => {
  //     const row = document.createElement('tr');
  //
  //     // åˆ›å»ºå•å…ƒæ ¼å¹¶æ’å…¥æ•°æ®
  //     for (const key in rowData) {
  //       const cell = document.createElement('td');
  //       cell.textContent = rowData[key];
  //       row.appendChild(cell);
  //     }

      // æ·»åŠ å¤é€‰æ¡†åˆ—
      // const checkboxCell = document.createElement('td');
      // const checkbox = document.createElement('input');
      // checkbox.type = 'checkbox';
      // checkboxCell.appendChild(checkbox);
      // row.appendChild(checkboxCell);
      //
      // // æ·»åŠ æ“ä½œåˆ—
      // const actionCell = document.createElement('td');

      // æ·»åŠ â€œåˆ é™¤â€æŒ‰é’®
  //     const deleteButton = document.createElement('button');
  //     deleteButton.innerHTML = '<i class="layui-icon layui-icon-delete"></i>';
  //     const cls_del = ["layui-btn","layui-btn-sm","layui-btn-radius","layui-btn-danger"];
  //     deleteButton.classList.add(...cls_del);
  //     deleteButton.type="button";
  //     deleteButton.onclick = function () {
  //       // æ·»åŠ ç›¸åº”çš„åˆ é™¤é€»è¾‘
  //       deleteRow(rowData);
  //
  //     };
  //     actionCell.appendChild(deleteButton);
  //
  //     // æ·»åŠ â€œä¿®æ”¹â€æŒ‰é’®
  //     const updateButton = document.createElement('button');
  //     updateButton.innerHTML = '<i class="layui-icon layui-icon-edit"></i>';
  //     const cls_edit = ["layui-btn","layui-btn-sm","layui-btn-radius","layui-btn-normal"];
  //     updateButton.classList.add(...cls_edit);
  //     updateButton.type="button";
  //     updateButton.onclick = function () {
  //       // æ·»åŠ ç›¸åº”çš„ä¿®æ”¹é€»è¾‘
  //       updateRow(rowData);
  //       // console.log(rowData);
  //     };
  //     actionCell.appendChild(updateButton);
  //     row.appendChild(actionCell);
  //     tbody.appendChild(row);
  //   });
  // }
  //
  // // åˆå§‹åŒ–é¡µé¢æ—¶åŠ è½½æ•°æ®
  // fetchDataAndRenderTable();
</script>

</body>
</html>

<!--    &lt;!&ndash; æµ‹ç«™ç®¡ç†è¡¨æ ¼ &ndash;&gt;-->
<!--<div id="content">-->
<!--&lt;!&ndash;  <div id="clipped-title1">&ndash;&gt;-->
<!--&lt;!&ndash;    <h1>æµ‹ç«™ç®¡ç†</h1>&ndash;&gt;-->
<!--&lt;!&ndash; æ²³æµåŸºæœ¬ä¿¡æ¯è¡¨æ ¼ &ndash;&gt;-->
<!--<div id="riverContent">-->
<!--&lt;!&ndash;  <div id="clipped-title3">&ndash;&gt;-->
<!--&lt;!&ndash;    <h1>æ²³æµåŸºæœ¬ä¿¡æ¯</h1>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--  &lt;!&ndash; æ²³æµåŸºæœ¬ä¿¡æ¯è¡¨æ ¼ &ndash;&gt;-->
<!--  <div style="text-align: right;">-->
<!--&lt;!&ndash;    <button id="button" onclick="addRow()">æ·»åŠ </button>&ndash;&gt;-->
<!--    <button type="button" class="layui-btn layui-btn-sm layui-btn-radius" onclick="addRow()">-->
<!--      <i class="layui-icon layui-icon-add-1"></i>-->
<!--    </button>-->
<!--  </div>-->
<!--  <table class="layui-table">-->
<!--    <thead>-->
<!--    <tr>-->
<!--      <th>æ²³æµåç§°</th>-->
<!--      <th>æ²³æµç¼–ç </th>-->
<!--      <th>æµåŸŸåç§°</th>-->
<!--      <th>æµ‹ç«™ç¼–ç </th>-->
<!--      <th>æ°´ç³»åç§°</th>-->
<!--      <th></th>-->
<!--      <th>æ“ä½œ</th>-->
<!--    </tr>-->
<!--    </thead>-->
<!--    <tbody id="riverTableBody">-->
<!--    &lt;!&ndash; æ•°æ®å°†ç”± JavaScript åŠ¨æ€å¡«å…… &ndash;&gt;-->
<!--    </tbody>-->
<!--  </table>-->
<!--</div>-->